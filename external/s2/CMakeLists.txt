if ("${S2_ROOT}" STREQUAL "")
  set(S2_ROOT "$ENV{S2_ROOT}")
  if (NOT "${S2_ROOT}" STREQUAL "")
    string(REPLACE "\"" "" S2_ROOT ${S2_ROOT})
  endif()
endif()

include(${CMAKE_ROOT}/Modules/ExternalProject.cmake)
ExternalProject_Add(s2-geometry
  SOURCE_DIR ${S2_ROOT}
  BUILD_COMMAND ${CMAKE_COMMAND} --build . --target s2
  INSTALL_COMMAND ""
  CMAKE_ARGS -DWITH_GLOG=OFF -DWITH_GFLAGS=OFF -DBUILD_SHARED_LIBS=OFF -DBUILD_EXAMPLES=OFF -DINSTALL_HEADERS=OFF
  CMAKE_CACHE_ARGS -DBUILD_EXAMPLES:bool=OFF -DCMAKE_USE_LIBSSH2:bool=OFF -DCMAKE_USE_OPENSSL:bool=OFF -DINSTALL_HEADERS:bool=OFF
)
